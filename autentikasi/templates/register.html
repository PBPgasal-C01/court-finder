{% extends "base.html" %}
{% load socialaccount static %}

{% block meta %}
<title>Register | CourtFinder</title>
{% endblock meta %}



{% block content %}
<div class="min-h-screen flex items-center justify-center bg-[#F2F6F6] p-6">
  <div class="w-full max-w-lg bg-white rounded-2xl shadow-xl p-6 md:p-8">
    <h1 class="text-3xl font-semibold text-[#2F593F] text-center mb-6 tracking-wide">
      Create Your Account
    </h1>

    {% if form.non_field_errors %}
      <div class="text-sm text-red-600 mb-4">{{ form.non_field_errors }}</div>
    {% endif %}

    <form method="post" enctype="multipart/form-data" class="grid grid-cols-1 md:grid-cols-2 gap-5">
      {% csrf_token %}

      <!-- Email -->
      <div class="md:col-span-2">
        <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-[#2F593F] mb-1">Email</label>
        <input type="email" name="{{ form.email.html_name }}" id="{{ form.email.id_for_label }}"
               value="{{ form.email.value|default:'' }}"
               class="w-full border border-gray-300 rounded-lg p-3 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-[#698C6A]" required>
        {% if form.email.errors %}<p class="text-sm text-red-600 mt-1">{{ form.email.errors|striptags }}</p>{% endif %}
      </div>

      <!-- Username -->
      <div>
        <label for="{{ form.username.id_for_label }}" class="block text-sm font-medium text-[#2F593F] mb-1">Display Name</label>
        <input type="text" name="{{ form.username.html_name }}" id="{{ form.username.id_for_label }}"
               value="{{ form.username.value|default:'' }}"
               class="w-full border border-gray-300 rounded-lg p-3 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-[#698C6A]">
        {% if form.username.errors %}<p class="text-sm text-red-600 mt-1">{{ form.username.errors|striptags }}</p>{% endif %}
      </div>

      <!-- Preference -->
      <div>
        <label for="{{ form.preference.id_for_label }}" class="block text-sm font-medium text-[#2F593F] mb-1">Preference</label>
        <select id="{{ form.preference.id_for_label }}" name="{{ form.preference.html_name }}"
                class="w-full border border-gray-300 rounded-lg p-3 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-[#698C6A]">
          {% for val, label in form.preference.field.choices %}
            <option value="{{ val }}" {% if form.preference.value == val %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
        {% if form.preference.errors %}<p class="text-sm text-red-600 mt-1">{{ form.preference.errors|striptags }}</p>{% endif %}
      </div>

      <!-- Profile Photo -->
      <div class="md:col-span-2">
        <label for="{{ form.photo.id_for_label }}" class="block text-sm font-medium text-[#2F593F] mb-1">Profile Photo</label>
        <input type="file" name="{{ form.photo.html_name }}" id="{{ form.photo.id_for_label }}"
               class="w-full text-sm text-gray-700 file:mr-4 file:py-2.5 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:text-white file:bg-[#79A6B9] hover:file:bg-[#5b8ca0] transition">
        {% if form.photo.errors %}<p class="text-sm text-red-600 mt-1">{{ form.photo.errors|striptags }}</p>{% endif %}
      </div>

      <!-- Password -->
      <div>
        <label for="{{ form.password1.id_for_label }}" class="block text-sm font-medium text-[#2F593F] mb-1">Password</label>
        <input type="password" name="{{ form.password1.html_name }}" id="{{ form.password1.id_for_label }}"
               class="w-full border border-gray-300 rounded-lg p-3 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-[#698C6A]" required>
        {% if form.password1.errors %}<p class="text-sm text-red-600 mt-1">{{ form.password1.errors|striptags }}</p>{% endif %}
      </div>

      <!-- Confirm Password -->
      <div>
        <label for "{{ form.password2.id_for_label }}" class="block text-sm font-medium text-[#2F593F] mb-1">Confirm Password</label>
        <input type="password" name="{{ form.password2.html_name }}" id="{{ form.password2.id_for_label }}"
               class="w-full border border-gray-300 rounded-lg p-3 text-gray-800 text-base focus:outline-none focus:ring-2 focus:ring-[#698C6A]" required>
        {% if form.password2.errors %}<p class="text-sm text-red-600 mt-1">{{ form.password2.errors|striptags }}</p>{% endif %}
      </div>

      <!-- Submit -->
      <div class="md:col-span-2">
        <button type="submit"
                class="w-full bg-[#2F593F] text-white font-semibold py-3 text-lg rounded-xl hover:bg-[#244d36] transition">
          Register
        </button>
      </div>
    </form>

    <!-- Divider -->
    <div class="flex items-center my-6">
      <div class="flex-1 h-px bg-gray-200"></div>
      <span class="px-3 text-gray-500 text-sm">or</span>
      <div class="flex-1 h-px bg-gray-200"></div>
    </div>

    <!-- Google Signup -->
    <a href="{% provider_login_url 'google' process='signup' %}"
       class="w-full inline-flex items-center justify-center gap-2 border border-gray-300 rounded-lg py-3 hover:bg-gray-50 transition text-base">
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" class="w-5 h-5">
      <span class="font-medium text-[#2F593F]">Sign up with Google</span>
    </a>

    <p class="mt-6 text-center text-sm text-gray-600">
      Already have an account?
      <a href="{% url 'autentikasi:login' %}" class="text-[#79A6B9] font-semibold hover:underline">Login here</a>
    </p>
  </div>
</div>
{% endblock content %}
